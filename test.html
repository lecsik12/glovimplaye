<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ | GlovimPlaye</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <!-- Firebase v8 -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Arial', sans-serif;
      background: #f7f7f7;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: #fff;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    h2 { color: #ff7f50; text-align: center; }
    .reviews-section {
      margin-top: 20px;
      text-align: center;
    }
    .reviews-section h3 {
      margin-bottom: 10px;
    }
    .rating-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
    }
    .rating-buttons button {
      background: #ff7f50;
      border: none;
      color: white;
      font-size: 16px;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .rating-buttons button:hover {
      background: #ff4500;
    }
    .rating-buttons button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    .rating-percent {
      font-size: 18px;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>

  <!-- –ë–ª–æ–∫ –æ—Ç–∑—ã–≤–æ–≤ –ø—Ä–æ–¥–∞–≤—Ü–∞ -->
  <div class="reviews-section">
    <h3>–†–µ–π—Ç–∏–Ω–≥ –ø—Ä–æ–¥–∞–≤—Ü–∞: <span id="ratingPercent">0%</span></h3>
    <div class="rating-buttons">
      <button id="likeBtn">üëç –õ–∞–π–∫</button>
      <button id="dislikeBtn">üëé –î–∏–∑–ª–∞–π–∫</button>
    </div>
  </div>
</div>

<script>
  // Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
  var firebaseConfig = {
    apiKey: "AIzaSyAhn2H2BExFFf7GO2k_YDfrwPiV_cYdUBg",
    authDomain: "glovimplaye-b1023.firebaseapp.com",
    databaseURL: "https://glovimplaye-b1023-default-rtdb.firebaseio.com",
    projectId: "glovimplaye-b1023",
    storageBucket: "glovimplaye-b1023.firebasestorage.app",
    messagingSenderId: "553440591519",
    appId: "1:553440591519:web:b7be45a9253689f322acaa"
  };
  firebase.initializeApp(firebaseConfig);

  let sellerName = "–ü—Ä–æ–¥–∞–≤–µ—Ü123"; // –ü–æ–ª—É—á–∏—Ç–µ –∏–∑ –¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞
  let currentUser = "–ü–æ–∫—É–ø–∞—Ç–µ–ª—å123"; // –ü–æ–ª—É—á–∏—Ç–µ –∏–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

  // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞
  function loadRating() {
    firebase.database().ref('reviews/' + sellerName).once('value').then(snapshot => {
      let data = snapshot.val();
      let likes = data?.likes || 0;
      let dislikes = data?.dislikes || 0;
      let total = likes + dislikes;
      let ratingPercent = total > 0 ? Math.round((likes / total) * 100) : 0;
      
      document.getElementById("ratingPercent").innerText = ratingPercent + "%";
    });
  }

  // –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–∞–π–∫–∞/–¥–∏–∑–ª–∞–π–∫–∞
  function sendReview(type) {
    firebase.database().ref('reviews/' + sellerName).once('value').then(snapshot => {
      let data = snapshot.val() || { likes: 0, dislikes: 0 };
      
      if (type === "like") {
        data.likes += 1;
      } else {
        data.dislikes += 1;
      }

      firebase.database().ref('reviews/' + sellerName).set(data, error => {
        if (!error) {
          alert("–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à—É –æ—Ü–µ–Ω–∫—É!");
          document.getElementById("likeBtn").disabled = true;
          document.getElementById("dislikeBtn").disabled = true;
          loadRating();
        }
      });
    });
  }

  // –ù–∞–∑–Ω–∞—á–∞–µ–º —Å–æ–±—ã—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫–∏
  document.getElementById("likeBtn").addEventListener("click", () => sendReview("like"));
  document.getElementById("dislikeBtn").addEventListener("click", () => sendReview("dislike"));

  // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–µ–π—Ç–∏–Ω–≥ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  loadRating();
</script>

</body>
</html>
