<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>GlovimPlaye | Финансы</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <!-- Подключение стилей Font Awesome для иконок -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  
  <style>
    :root {
      --bg-color: #181818;
      --header-bg: #1f1f1f;
      --accent-color: #ff7f50;
      --accent-hover: #ff4500;
      --text-color: #fff;
      --card-bg: #252525;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      background: var(--bg-color);
      color: var(--text-color);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      min-height: 100vh;
      padding: 20px;
    }
    
    header {
      text-align: center;
      margin-bottom: 30px;
    }
    
    header .logo {
      font-size: 32px;
      font-weight: bold;
      color: var(--accent-color);
      cursor: pointer;
    }
    
    .finance-container {
      max-width: 600px;
      margin: 0 auto;
      background: var(--card-bg);
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0px 4px 12px rgba(0,0,0,0.5);
    }
    
    .section {
      margin-bottom: 30px;
    }
    
    .section h2 {
      margin-bottom: 15px;
      font-size: 24px;
      border-bottom: 2px solid var(--accent-color);
      padding-bottom: 5px;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 5px;
    }
    
    .form-group input {
      width: 100%;
      padding: 10px;
      border-radius: 6px;
      border: none;
      outline: none;
      font-size: 16px;
    }
    
    .btn {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      background: var(--accent-color);
      color: var(--text-color);
      transition: background 0.3s, transform 0.3s;
      margin-top: 10px;
    }
    
    .btn:hover {
      background: var(--accent-hover);
      transform: translateY(-3px);
    }
    
    /* Стили для блока выбора способа пополнения */
    .deposit-methods {
      display: flex;
      gap: 20px;
      justify-content: space-around;
      margin-bottom: 15px;
    }
    
    .deposit-methods .method {
      flex: 1;
      text-align: center;
      cursor: pointer;
      border: 2px solid transparent;
      padding: 10px;
      border-radius: 8px;
      transition: border 0.3s;
    }
    
    .deposit-methods .method.selected {
      border-color: var(--accent-color);
    }
    
    .deposit-methods .method img {
      width: 80px;
      height: 80px;
      object-fit: cover;
      margin-bottom: 5px;
    }
    
    footer {
      text-align: center;
      margin-top: 40px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <header>
    <div class="logo" onclick="window.location.href='index.html'">GlovimPlaye</div>
  </header>
  
  <div class="finance-container">
    <!-- Раздел пополнения баланса -->
    <div class="section">
      <h2>Пополнение баланса</h2>
      <div class="form-group">
        <label for="depositAmount">Сумма пополнения (₽):</label>
        <input type="number" id="depositAmount" placeholder="Введите сумму">
      </div>
      
      <!-- Блок выбора способа пополнения -->
      <h3 style="margin-bottom:10px; font-size:18px;">Выберите способ пополнения</h3>
      <div class="deposit-methods">
        <div class="method" onclick="selectMethod('cryptobot', this)">
          <img src="path-to-cryptobot-image.png" alt="CryptoBot">
          <p>CryptoBot</p>
        </div>
        <div class="method" onclick="selectMethod('bankcard', this)">
          <img src="path-to-bankcard-image.png" alt="Банковская карта">
          <p>Банковская карта</p>
        </div>
      </div>
      <button class="btn" onclick="startDeposit()">
        <i class="fas fa-plus-circle"></i> Пополнить
      </button>
    </div>
    
    <!-- Раздел вывода средств -->
    <div class="section">
      <h2>Вывод средств</h2>
      <div class="form-group">
        <label for="withdrawAmount">Сумма вывода (₽):</label>
        <input type="number" id="withdrawAmount" placeholder="Введите сумму">
      </div>
      <button class="btn" onclick="withdrawMoney()">
        <i class="fas fa-minus-circle"></i> Вывести
      </button>
    </div>
  </div>
  
  <footer>
    © 2025 GlovimPlaye. Все права защищены.
  </footer>
  
  <script>
    // Глобальная переменная для хранения выбранного метода пополнения
    let selectedMethod = null;
    
    function selectMethod(method, element) {
      selectedMethod = method;
      // Снимаем выделение со всех методов
      document.querySelectorAll('.deposit-methods .method').forEach(el => {
        el.classList.remove('selected');
      });
      // Выделяем выбранный метод
      element.classList.add('selected');
    }
    
    // Функция инициирует запрос к серверу для создания платежа
    async function startDeposit() {
      const amount = parseFloat(document.getElementById('depositAmount').value);
      if (isNaN(amount) || amount <= 0) {
        alert("Пожалуйста, введите корректную сумму для пополнения.");
        return;
      }
      if (!selectedMethod) {
        alert("Пожалуйста, выберите способ пополнения.");
        return;
      }
      
      // Генерация уникального ID транзакции (пример)
      const transactionId = 'tx_' + Date.now() + '_' + Math.floor(Math.random() * 1000);
      
      // Здесь вы можете получить данные пользователя (например, через авторизацию)
      // Для демонстрации заданы фиктивные данные:
      const userId = 'user_12345';
      const email = 'user@example.com';
      
      // Отправляем запрос на сервер для создания платежа
      try {
        const response = await fetch('/create-payment', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ amount, method: selectedMethod, transactionId, userId, email })
        });
        const data = await response.json();
        if (data.paymentLink) {
          // Открываем ссылку для оплаты (можно также отобразить QR-код)
          window.open(data.paymentLink, '_blank');
        } else {
          alert("Ошибка создания платежа.");
        }
      } catch (error) {
        console.error("Ошибка:", error);
        alert("Ошибка связи с сервером.");
      }
    }
    
    function withdrawMoney() {
      const amount = parseFloat(document.getElementById('withdrawAmount').value);
      if (isNaN(amount) || amount <= 0) {
        alert("Пожалуйста, введите корректную сумму для вывода.");
        return;
      }
      // Здесь можно добавить запрос на вывод через сервер
      alert("Запрос на вывод суммы " + amount + " ₽ отправлен на обработку.");
    }
  </script>
</body>
</html>
